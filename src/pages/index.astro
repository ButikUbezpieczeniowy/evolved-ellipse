---
// Importujemy wszystkie komponenty
import Naglowek from '../components/Naglowek.astro';
import Hero from '../components/Hero.astro';
import ProblemRozwiazanie from '../components/ProblemRozwiazanie.astro';
import KluczoweProdukty from '../components/KluczoweProdukty.astro';
import Opinie from '../components/Opinie.astro';
import CTA from '../components/CTA.astro';
import Stopka from '../components/Stopka.astro';
import Analytics from '../components/Analytics.astro';
import FAQSection from '../components/FAQSection.astro'; 

// IMPORTUJEMY FUNKCJĘ POBIERAJĄCĄ DANE Z GEMINI API:
import generateFAQContent from '../ai/gemini-logic.js'; 

// 1. NAPRAWA BŁĘDU KANONICZNEGO URL (Używamy Astro.url.href, aby ZAWSZE działało)
const canonicalURL = Astro.url.href;

// DEFINIUJEMY TEMAT I POBIERAMY DANE PRZED RENDEROWANIEM
const topic = "Ogólne ubezpieczenia dla firm i osób prywatnych - WZORZEC AKTYWNY";
const faqData = await generateFAQContent(topic);
---

---
// Importujemy wszystkie komponenty (zostaje)
import Naglowek from '../components/Naglowek.astro';
// ... Hero, ProblemRozwiazanie, KluczoweProdukty, Opinie, CTA, Stopka, Analytics, FAQSection
import FAQSection from '../components/FAQSection.astro'; 
import generateFAQContent from '../ai/gemini-logic.js'; 

const canonicalURL = Astro.url.href; // NAPRAWIONE
const topic = "Ogólne ubezpieczenia dla firm i osób prywatnych - WZORZEC AKTYWNY";
const faqData = await generateFAQContent(topic);
---

<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    
    <title>Galeria Ubezpieczeniowa - BIBLIA LANDING PAGES - WZORZEC AKTYWNY</title>
    
    <link rel="preload" href="/fonts/nazwa-czcionki-regular.woff2" as="font" type="font/woff2" crossorigin>

    <link rel="mask-icon" href="/safari-pin-icon.svg" color="#0056b3">

    <meta name="description" content="[TUTAJ WPISZ UNIKALNY OPIS STRONY. DLA WZORCA JEST TO PUSTY TEKST.]" />
    <link rel="canonical" href={canonicalURL} /> 

    <meta property="og:title" content="Galeria Ubezpieczeniowa - WZORZEC AKTYWNY" />
    <meta property="og:description" content="[TUTAJ WPISZ UNIKALNY OPIS META DLA SOCIAL MEDIA]" />
    <meta property="og:type" content="website" />
    
    <meta name="msvalidate" content="[TUTAJ WPISZ SWÓJ UNIKALNY KOD WERYFIKACYJNY BING]" />

    <script>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '1159782502628502');
      fbq('track', 'PageView');
    </script>
    <noscript>
      <img height="1" width="1" style="display:none"
           src="https://www.facebook.com/tr?id=1159782502628502&ev=PageView&noscript=1"/>
    </noscript>
    
    <Analytics />
  </head>
  <body>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T958KD9G"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    
    <Naglowek />
    <main>
      <Hero />
      <ProblemRozwiazanie />
      <KluczoweProdukty />
      
      <FAQSection data={faqData} />
      
      <Opinie />
      <CTA />
    </main>
    <Stopka />
  </body>
</html>